# I) Cấu trúc vi điều khiển
- ARM Cortex M4 CPU: so vs M3 có tốc độ xử lý tối đa 72Mhz thì M4 có tốc độ 168MHz, khả năng thực thi lệnh nhanh hơn
- Flash có thể lên đến 1MB, 2 vùng nhớ SRAM
- Nhiều ngoại vi của mỗi loại và có thêm 1 số ngoại vi khác như Erthenet, USB OTG
- Data Bus

![STM32F407 Block Diagram](https://github.com/giangnamtud/STM32/assets/165153939/b5b95902-8823-4ffc-b301-6727fe18dc33)

## Bài tập 1:

STM32F407VG MCU

Ordering Information
![Ordering Information](https://github.com/giangnamtud/STM32/assets/165153939/ad8736f3-69bc-4afe-894b-ca827ccead28)

### 1. Vi điều khiển của bạn có tổng cộng bao nhiêu chân (Pin)?

Từ trong Ordering Information: Pin counts G = 100 Pins


### 2. Có bao nhiêu I/O Pin?
![Peripherals count con](https://github.com/giangnamtud/STM32/assets/165153939/912a6d95-6687-4db0-9fab-4e75582e5807)

82 GPIOS

![Pinouts and Pins description](https://github.com/giangnamtud/STM32/assets/165153939/f79c84d3-51e2-47c6-adb6-c0a4efe77a8d)


### 3. Được chia làm bao nhiêu Port?

### 4. Mỗi Port có bao nhiêu Pin?

### 5. Liệt kê những Pin còn lại không phải GPIO?
- Ta thâý kí hiệu VCC vs GND, đó là những thiết bị được thiết kế ới công nghệ TTL (Transistor-transistor logic). VCC là điện áp cấp vào cực C (Collector), GND là cực nối đất. Sau đó công nghệ thiết kế tối ưu hơn là CMOS, có 2 cực D (Drain) và cực S (Source) thì sẽ có kí hiệu VDD, VSS (tương tự chức năng như VCC, GND). Chúng đều là chân cấp nguồn cho vi điều khiển. 
Câu hỏi bây h là: Liệu chỉ cần cấp nguồn vào 1 cặp hay là tất cả các cặp? Câu trả lời là KHÔNG, PHẢI CẤP NGUỒN VÀO ĐỦ CẶP CHÂN. Bên trong MCU có các mạch digital và analog thì cặp chân đánh số cấp nguồn cho mạch digital còn cặp chân đánh chữ A cấp nguồn cho mạch analog
  + VDD_1,2,3..; 
  + VDDA:
  + VSS_1,2,3..;
  + VSSA:

- VBAT: sử dụng pin cúc áo CMOS, thông thương có những mạch cần, có những mạch thì không cần dùng. Các mạch mainboard máy tính hoặc cách mạch có yếu tố liên quan đến thời gian thì có thiết kế CMOS này. Bên trong MCU này có vi mạch đếm thời gian thực (chạy giống như đồng hồ, có ngày tháng năm giờ phút giây, có thể hẹn giờ). Vi mạch này khi mất nguồn chính thì để đảm bảo thời gian bên trong nó chạy đúng, thì nó yêu cầu thiết kế viên pin vào chân VBAT. Khi mất điện chính thì nó tự động switch sang VBAT để nuôi khối thời gian, để làm sao khi khời động lại thì thời gian vẫn được hiện thị đúng.

- NRST: chân khời động. Khi chân nayg được tích cực thì chương trình trong MCU sẽ chạy lại từ đầu. Mạch này sẽ reset khi chân này tích cực mức negative (khi chân này có mức logic = 0)

- BOOTO
